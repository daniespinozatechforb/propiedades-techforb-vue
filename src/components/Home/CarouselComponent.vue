<template>
  <section class="carousel-section">
    <div class="property-carousel">
      <div class="property-carousel__divider"></div>

      <div class="property-carousel__container">
        <button
          class="property-carousel__nav-button property-carousel__nav-button--prev"
          @click="prevPage"
          :disabled="currentPage === 0"
        >
          ‹
        </button>

        <div class="property-carousel__grid">
          <div class="property-card" v-for="property in paginatedProperties" :key="property.image">
            <div class="property-card__image-container">
              <img :src="property.image" :alt="property.type" class="property-card__image" />
            </div>

            <div class="property-card__header">
              <span class="property-card__type">{{ property.type }}</span>
              <span class="property-card__price">{{ property.price }}</span>
            </div>

            <div class="property-card__icons">
              <svg
                class="property-card__icon"
                width="55"
                height="23"
                viewBox="0 0 55 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <rect
                  x="0.804199"
                  y="0.708496"
                  width="53.8433"
                  height="21.9624"
                  rx="7.08464"
                  fill="#F8F9FB"
                />
                <g clip-path="url(#clip0_722_213)">
                  <path
                    d="M11.2896 8.00562V15.3736"
                    stroke="#365196"
                    stroke-width="0.708464"
                    stroke-linecap="round"
                  />
                  <path
                    d="M16.957 9.70605V13.1067"
                    stroke="#365196"
                    stroke-width="0.708464"
                    stroke-linecap="round"
                  />
                  <path
                    d="M21.4912 9.70605V15.3738"
                    stroke="#365196"
                    stroke-width="0.708464"
                    stroke-linecap="round"
                  />
                  <path
                    d="M11.2896 13.1067H21.4914"
                    stroke="#365196"
                    stroke-width="0.708464"
                    stroke-linecap="round"
                  />
                  <path
                    d="M16.957 9.70605H21.4912"
                    stroke="#365196"
                    stroke-width="0.708464"
                    stroke-linecap="round"
                  />
                  <path
                    d="M14.1235 12.2565C14.906 12.2565 15.5404 11.6221 15.5404 10.8395C15.5404 10.057 14.906 9.42261 14.1235 9.42261C13.3409 9.42261 12.7065 10.057 12.7065 10.8395C12.7065 11.6221 13.3409 12.2565 14.1235 12.2565Z"
                    stroke="#365196"
                    stroke-width="0.708464"
                  />
                </g>
                <path
                  d="M35.9679 13.6725C36.5677 13.1908 37.0377 12.7964 37.3777 12.4894C37.7178 12.1777 38.0035 11.8541 38.235 11.5188C38.4711 11.1787 38.5892 10.8457 38.5892 10.5199C38.5892 10.2129 38.5136 9.97198 38.3625 9.79722C38.2161 9.61774 37.9775 9.528 37.6469 9.528C37.3258 9.528 37.0754 9.62955 36.896 9.83264C36.7212 10.031 36.6267 10.2979 36.6126 10.6332H35.9891C36.008 10.1042 36.1686 9.69567 36.4709 9.40757C36.7732 9.11946 37.1628 8.9754 37.6398 8.9754C38.1263 8.9754 38.5113 9.11001 38.7946 9.37923C39.0828 9.64844 39.2268 10.0192 39.2268 10.4915C39.2268 10.8835 39.1087 11.2661 38.8726 11.6392C38.6411 12.0076 38.3766 12.3335 38.0791 12.6169C37.7815 12.8956 37.4013 13.2215 36.9385 13.5946H39.3756V14.133H35.9679V13.6725Z"
                  fill="#020202"
                />
                <defs>
                  <clipPath id="clip0_722_213">
                    <rect
                      width="11.3354"
                      height="8.50157"
                      fill="white"
                      transform="translate(10.7227 7.43896)"
                    />
                  </clipPath>
                </defs>
              </svg>

              <svg
                class="property-card__icon"
                width="55"
                height="23"
                viewBox="0 0 55 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <rect
                  x="0.901367"
                  y="0.708496"
                  width="53.8433"
                  height="21.9624"
                  rx="7.08464"
                  fill="#F8F9FB"
                />
                <path
                  d="M20.6567 11.6741C20.6541 10.9487 20.3704 10.2671 19.8572 9.75385C19.4023 9.29891 18.815 9.02449 18.1822 8.96622V8.00058C18.1822 7.38391 17.9405 6.80263 17.5017 6.36382C17.0629 5.92501 16.4816 5.68335 15.8649 5.68335H14.6351C14.0184 5.68335 13.4371 5.92501 12.9983 6.36382C12.5595 6.80263 12.3179 7.38391 12.3179 8.00058V17.4414C12.3179 17.5822 12.4321 17.6964 12.5729 17.6964C12.7138 17.6964 12.828 17.5822 12.828 17.4414V8.00058C12.828 7.00412 13.6386 6.19344 14.6351 6.19344H15.8649C16.8614 6.19344 17.6721 7.00412 17.6721 8.00058V8.96622C17.0393 9.02449 16.452 9.29891 15.9971 9.75385C15.4815 10.2694 15.1976 10.9548 15.1976 11.6839C15.1976 11.8248 15.3118 11.939 15.4527 11.939H20.4017C20.4017 11.939 20.4018 11.939 20.4018 11.939C20.5427 11.939 20.6569 11.8248 20.6569 11.6839C20.6569 11.6806 20.6568 11.6773 20.6567 11.6741ZM15.7223 11.4289C15.8492 10.3248 16.7896 9.46449 17.9271 9.46449C19.0647 9.46449 20.0051 10.3248 20.132 11.4289H15.7223Z"
                  fill="#365196"
                />
                <path
                  d="M15.9225 12.3428C15.7817 12.3428 15.6675 12.457 15.6675 12.5978V13.7891C15.6675 13.93 15.7817 14.0442 15.9225 14.0442C16.0634 14.0442 16.1776 13.93 16.1776 13.7891V12.5978C16.1776 12.457 16.0634 12.3428 15.9225 12.3428ZM17.9275 12.3428C17.7866 12.3428 17.6724 12.457 17.6724 12.5978V13.7891C17.6724 13.93 17.7866 14.0442 17.9275 14.0442C18.0683 14.0442 18.1825 13.93 18.1825 13.7891V12.5978C18.1825 12.457 18.0683 12.3428 17.9275 12.3428ZM19.9324 12.3428C19.7916 12.3428 19.6774 12.457 19.6774 12.5978V13.7891C19.6774 13.93 19.7916 14.0442 19.9324 14.0442C20.0733 14.0442 20.1875 13.93 20.1875 13.7891V12.5978C20.1875 12.457 20.0733 12.3428 19.9324 12.3428Z"
                  fill="#365196"
                />
                <path
                  d="M36.8763 9.65553V9.0675H38.2082V14.1897H37.5564V9.65553H36.8763Z"
                  fill="#020202"
                />
              </svg>

              <svg
                class="property-card__icon"
                width="54"
                height="23"
                viewBox="0 0 54 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <rect
                  x="-0.00146484"
                  y="0.708496"
                  width="53.8433"
                  height="21.9624"
                  rx="7.08464"
                  fill="#F8F9FB"
                />
                <path
                  d="M9.2085 14.0404L13.2342 18.0661L21.9608 9.33938L17.9352 5.31372L9.2085 14.0404ZM13.2342 17.3275L9.94708 14.0404L10.4919 13.4956L11.7437 14.7474L12.113 14.3781L10.8612 13.1263L11.7977 12.1898L12.5272 12.9192L12.8965 12.5499L12.167 11.8205L13.1036 10.8839L14.3553 12.1357L14.7246 11.7664L13.4729 10.5146L14.4094 9.57808L15.1389 10.3075L15.5081 9.93824L14.7787 9.20879L15.7153 8.27224L16.967 9.52402L17.3363 9.15473L16.0845 7.90295L17.0211 6.9664L17.7505 7.69584L18.1198 7.32655L17.3904 6.5971L17.9352 6.05231L21.2223 9.33938L13.2342 17.3275Z"
                  fill="#365196"
                />
                <path
                  d="M30.2143 10.2861C30.1104 9.7618 29.7868 9.49967 29.2437 9.49967C28.8233 9.49967 28.5092 9.66261 28.3014 9.98851C28.0936 10.3097 27.9921 10.841 27.9968 11.5825C28.1054 11.3369 28.2849 11.1457 28.5352 11.0087C28.7903 10.867 29.0737 10.7962 29.3854 10.7962C29.8719 10.7962 30.2591 10.9473 30.5473 11.2496C30.8401 11.5518 30.9865 11.9698 30.9865 12.5036C30.9865 12.8247 30.9227 13.1128 30.7952 13.3679C30.6724 13.6229 30.4835 13.826 30.2284 13.9772C29.9781 14.1283 29.6735 14.2039 29.3145 14.2039C28.8281 14.2039 28.4478 14.0952 28.1739 13.878C27.9 13.6607 27.7087 13.3608 27.6 12.9782C27.4914 12.5957 27.4371 12.1233 27.4371 11.5613C27.4371 9.82792 28.0417 8.96123 29.2508 8.96123C29.7136 8.96123 30.0773 9.08639 30.3418 9.33672C30.6063 9.58704 30.7622 9.90349 30.8094 10.2861H30.2143ZM29.2508 11.3417C29.0477 11.3417 28.8564 11.3842 28.6769 11.4692C28.4974 11.5495 28.351 11.6747 28.2377 11.8447C28.129 12.01 28.0747 12.2131 28.0747 12.454C28.0747 12.8129 28.1786 13.1057 28.3864 13.3325C28.5943 13.5544 28.8918 13.6654 29.2791 13.6654C29.6097 13.6654 29.8719 13.5639 30.0655 13.3608C30.2639 13.153 30.3631 12.8743 30.3631 12.5248C30.3631 12.1564 30.2686 11.8683 30.0797 11.6605C29.8907 11.4479 29.6144 11.3417 29.2508 11.3417ZM31.8563 11.5755C31.8563 10.7631 31.9885 10.1302 32.253 9.67678C32.5175 9.21864 32.9804 8.98957 33.6416 8.98957C34.2981 8.98957 34.7586 9.21864 35.0231 9.67678C35.2876 10.1302 35.4198 10.7631 35.4198 11.5755C35.4198 12.402 35.2876 13.0443 35.0231 13.5025C34.7586 13.9606 34.2981 14.1897 33.6416 14.1897C32.9804 14.1897 32.5175 13.9606 32.253 13.5025C31.9885 13.0443 31.8563 12.402 31.8563 11.5755ZM34.7822 11.5755C34.7822 11.1646 34.7539 10.8174 34.6972 10.534C34.6452 10.2459 34.5342 10.0145 34.3642 9.83973C34.1989 9.66497 33.958 9.5776 33.6416 9.5776C33.3204 9.5776 33.0748 9.66497 32.9048 9.83973C32.7395 10.0145 32.6285 10.2459 32.5718 10.534C32.5198 10.8174 32.4939 11.1646 32.4939 11.5755C32.4939 12.0005 32.5198 12.3571 32.5718 12.6452C32.6285 12.9334 32.7395 13.1648 32.9048 13.3395C33.0748 13.5143 33.3204 13.6017 33.6416 13.6017C33.958 13.6017 34.1989 13.5143 34.3642 13.3395C34.5342 13.1648 34.6452 12.9334 34.6972 12.6452C34.7539 12.3571 34.7822 12.0005 34.7822 11.5755ZM41.08 10.2365C41.3822 10.2365 41.6515 10.3002 41.8876 10.4278C42.1238 10.5506 42.3103 10.7371 42.4473 10.9874C42.5843 11.2378 42.6527 11.5424 42.6527 11.9014V14.1897H42.0151V11.9935C42.0151 11.6062 41.9183 11.311 41.7247 11.1079C41.5357 10.9001 41.2783 10.7962 40.9524 10.7962C40.6171 10.7962 40.3502 10.9048 40.1519 11.122C39.9535 11.3346 39.8543 11.644 39.8543 12.0501V14.1897H39.2167V11.9935C39.2167 11.6062 39.1199 11.311 38.9262 11.1079C38.7373 10.9001 38.4799 10.7962 38.154 10.7962C37.8187 10.7962 37.5518 10.9048 37.3534 11.122C37.1551 11.3346 37.0559 11.644 37.0559 12.0501V14.1897H36.4112V10.3073H37.0559V10.867C37.1834 10.6639 37.3534 10.508 37.566 10.3994C37.7832 10.2908 38.0218 10.2365 38.2815 10.2365C38.6074 10.2365 38.8955 10.3097 39.1459 10.4561C39.3962 10.6025 39.5827 10.8174 39.7055 11.1008C39.8142 10.8269 39.9936 10.6143 40.244 10.4632C40.4943 10.312 40.773 10.2365 41.08 10.2365ZM45.2122 11.2779V11.6959H43.3915V11.3275L44.1637 10.7041C44.3196 10.5765 44.4377 10.4561 44.5179 10.3427C44.603 10.2247 44.6455 10.0971 44.6455 9.96017C44.6455 9.83264 44.61 9.73346 44.5392 9.66261C44.4731 9.59177 44.3857 9.55634 44.2771 9.55634C44.1637 9.55634 44.074 9.5894 44.0079 9.65553C43.9465 9.71693 43.9087 9.80431 43.8945 9.91766H43.3773C43.3868 9.69567 43.4718 9.51383 43.6324 9.37214C43.793 9.23045 44.0126 9.1596 44.2912 9.1596C44.5605 9.1596 44.7754 9.23517 44.9359 9.38631C45.1012 9.53745 45.1839 9.72165 45.1839 9.93891C45.1839 10.1184 45.1319 10.279 45.028 10.4207C44.9241 10.5576 44.7565 10.7111 44.525 10.8812L43.9653 11.2779H45.2122Z"
                  fill="#020202"
                />
              </svg>
            </div>

            <div class="property-card__location">{{ property.location }}</div>
          </div>
        </div>

        <button
          class="property-carousel__nav-button property-carousel__nav-button--next"
          @click="nextPage"
          :disabled="currentPage === totalPages - 1"
        >
          ›
        </button>
      </div>

      <div class="property-carousel__divider"></div>
    </div>
  </section>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import propiedad1 from '@/assets/carousel/propiedad1.jpg'
import propiedad2 from '@/assets/carousel/propiedad2.jpg'
import propiedad3 from '@/assets/carousel/propiedad3.jpg'
import propiedad4 from '@/assets/carousel/propiedad4.jpg'

interface Property {
  type: string
  price: string
  location: string
  image: string
}

// Datos de propiedades
const properties = ref<Property[]>([
  {
    type: 'Departamento',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad1,
  },
  {
    type: 'PH',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad2,
  },
  {
    type: 'Departamento',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad3,
  },
  {
    type: 'PH',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad4,
  },
  {
    type: 'Casa',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad1,
  },
  {
    type: 'Casa',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad4,
  },
  {
    type: 'Departamento',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad3,
  },
  {
    type: 'PH',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad2,
  },
  {
    type: 'Departamento',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad1,
  },
  {
    type: 'Casa',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad3,
  },
  {
    type: 'Departamento',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad2,
  },
  {
    type: 'Departamento',
    price: 'USD 800',
    location: 'Av. Los álamos 1440 Rosario',
    image: propiedad4,
  },
])

// Paginación
const currentPage = ref(0)
const itemsPerPage = ref(4)

const totalPages = computed(() => {
  return Math.ceil(properties.value.length / itemsPerPage.value)
})

const paginatedProperties = computed(() => {
  const start = currentPage.value * itemsPerPage.value
  return properties.value.slice(start, start + itemsPerPage.value)
})

const nextPage = () => {
  if (currentPage.value < totalPages.value - 1) {
    currentPage.value++
  }
}

const prevPage = () => {
  if (currentPage.value > 0) {
    currentPage.value--
  }
}
</script>

<style scoped lang="scss">
.carousel-section {
  width: 100%;
  background-color: #f8f9fb;
}

.property-carousel {
  text-align: center;
  padding: 2rem;
  max-width: 1200px;
  margin: 0 auto;

  &__divider {
    height: 1px;
    background-color: #ddd;
    margin: 1.5rem 0;
  }

  &__container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin: 2rem 0;
  }

  &__grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
    flex-grow: 1;
  }

  &__nav-button {
    background: none;
    border: none;
    font-size: 2rem;
    cursor: pointer;
    color: #2a6496;
    padding: 0 1rem;

    &:disabled {
      color: #ccc;
      cursor: not-allowed;
    }

    &:hover:not(:disabled) {
      color: #1a4b7a;
    }
  }
}

.property-card {
  border: 1px solid #eee;
  border-radius: 8px;
  padding: 0;
  text-align: left;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
  display: flex;
  flex-direction: column;
  height: 300px;
  width: 230px;

  &:hover {
    transform: translateY(-5px);
  }

  &__image-container {
    height: 200px;
    overflow: hidden;
    border-radius: 6px 6px 0 0;
  }

  &__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
    border-bottom-right-radius: 12px;

    .property-card:hover & {
      transform: scale(1.05);
    }
  }

  &__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 10px 15px 0 15px;
  }

  &__type {
    font-weight: 600;
    font-size: 0.8rem;
    color: #444;
  }

  &__price {
    font-size: 1.1rem;
    color: #2a6496;
    font-weight: bold;
  }

  &__icons {
    display: flex;
    justify-content: space-between;
    margin: 20px 10px 0 10px;
    align-items: center;
  }

  &__location {
    font-size: 0.7rem;
    color: #666;
    margin: auto 15px 10px 15px;
  }
}

/* Responsive design */
@media (max-width: 1024px) {
  .property-carousel__grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

@media (max-width: 600px) {
  .property-carousel__grid {
    grid-template-columns: 1fr !important;
  }
}
</style>
